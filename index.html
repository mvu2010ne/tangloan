<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíå M√≥n Qu√† 20/10 T·∫∑ng Em Y√™u üíå</title>
    <style>
        /* --- CSS N·ªÄN V√Ä TRANG TR√ç --- */
        body {
            font-family: 'Times New Roman', Times, serif;
            background: linear-gradient(to right top, #f3e9f3, #ffe0f0, #f8c8d8);
            color: #4a148c;
            text-align: center;
            padding: 20px;
            margin: 0;
            overflow-x: hidden;
        }

        #container {
            max-width: 800px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            opacity: 0; 
            transition: opacity 2s;
        }

        h1 {
            color: #880e4f;
            font-size: 2.5em;
            text-shadow: 1px 1px 3px #f48fb1;
            margin-bottom: 20px;
        }

        /* --- PH·∫¶N H·ªéI NH·∫†C (ƒê√É KH√îI PH·ª§C) --- */
        #music-question {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px dashed #f06292;
            border-radius: 10px;
        }

        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        #btn-yes { background-color: #f48fb1; color: white; }
        #btn-yes:hover { background-color: #ec407a; }
        #btn-no { background-color: #e1bee7; color: #4a148c; }
        #btn-no:hover { background-color: #ce93d8; }

        #content { display: none; }

        /* Khung ch·ªØ nh·∫≠t cho th∆∞ */
        #letter-box {
            background-color: #fff9e6;
            border: 1px solid #ffcc80;
            padding: 25px;
            text-align: left;
            border-radius: 10px;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.1);
            white-space: pre-wrap;
            min-height: 250px;
            margin-top: 20px;
        }

        /* --- HI·ªÜU ·ª®NG TR√åNH CHI·∫æU ·∫¢NH (SLIDESHOW) --- */
        #photo-frame {
            width: 90%;
            max-width: 450px;
            height: 300px;
            border: 5px solid #e91e63;
            margin: 30px auto;
            border-radius: 10px;
            display: none;
            box-shadow: 0 0 15px rgba(233, 30, 99, 0.7);
            overflow: hidden;
            position: relative;
        }

        .slide-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 1.5s ease-in-out; 
        }
        
        .slide-image.active {
            opacity: 1;
        }
        
        /* --- B√ìNG BAY V√Ä B√ÅNH KEM --- */
        .balloon {
            width: 40px; height: 50px; background: #ff80ab;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: absolute; bottom: -100px; box-shadow: inset -5px -5px 10px rgba(0,0,0,0.2);
            opacity: 0; animation: float 10s ease-in-out infinite; z-index: 10;
        }
        .balloon::before {
            content: ''; position: absolute; bottom: -10px; left: 50%;
            transform: translateX(-50%); width: 0; height: 0; border-style: solid;
            border-width: 0 5px 10px 5px; border-color: transparent transparent var(--balloon-color) transparent;
        }

        @keyframes float {
            0% { transform: translateY(0); opacity: 0.8; }
            100% { transform: translateY(-120vh); opacity: 0; }
        }

        /* B√°nh kem CSS Art */
        #cake {
            margin: 40px auto 20px; display: none; width: 250px; height: 200px; position: relative;
        }
        .layer { position: absolute; width: 100%; border-radius: 50%; }
        .bottom { height: 80px; background: #f8c8d8; top: 120px; box-shadow: 0 5px 5px rgba(0, 0, 0, 0.2); }
        .middle { height: 60px; background: #ffe0f0; top: 60px; z-index: 1; }
        .top { height: 40px; background: #ffcc80; top: 20px; z-index: 2; }
        .icing { height: 20px; background: #ffffff; top: 10px; z-index: 3; border-radius: 50%; }
        .candle { position: absolute; width: 5px; height: 20px; background: #f44336; top: -10px; left: 50%; transform: translateX(-50%); z-index: 4; border-radius: 2px; }
        .flame { position: absolute; width: 6px; height: 8px; background: orange; border-radius: 50%; top: -18px; left: 50%; transform: translateX(-50%); z-index: 5; box-shadow: 0 0 5px yellow; }
        .message { position: absolute; top: 60px; width: 100%; text-align: center; font-weight: bold; color: #880e4f; font-size: 0.8em; z-index: 5; }
    </style>
</head>
<body>
    <audio id="bg-music" loop>
        <source src="chill.mp3" type="audio/mp3">
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ audio.
    </audio>

    <div id="music-question">
        <h2>üíñ Em y√™u ∆°i, anh c√≥ th·ªÉ b·∫≠t m·ªôt b·∫£n nh·∫°c nh·∫π nh√†ng kh√¥ng? üíñ</h2>
        <button id="btn-yes" class="btn">Yes! üé∂</button>
        <button id="btn-no" class="btn">Noü§´</button>
    </div>
    <div id="container">
        <h1 id="main-title">üíå CH√öC M·ª™NG NG√ÄY PH·ª§ N·ªÆ VI·ªÜT NAM 20 TH√ÅNG 10 üíå</h1>
        
        <div id="content">
            <h2 style="color: #6a1b9a;">1: L·ªùi Gi·ªõi Thi·ªáu</h2>
            <p id="intro-text" style="font-style: italic; font-size: 1.1em;"></p>
            
            <h2 style="color: #6a1b9a;">2: B·ª©c Th∆∞ Anh Vi·∫øt T·∫∑ng Emüòò</h2>
            <div id="letter-box">
                <p id="typing-letter">ƒêang so·∫°n th∆∞ t√¨nh...</p>
            </div>
            
            <h2 id="final-step" style="color: #6a1b9a; margin-top: 30px; display: none;">3: M√≥n Qu√† B·∫•t Ng·ªù!</h2>

            <div id="photo-frame">
                <p id="slideshow-message" style="line-height: 300px; color: #d81b60; font-weight: bold; margin: 0;">ƒêang t·∫£i ·∫£nh...</p>
            </div>
            
            <div id="balloon-area" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5;">
            </div>

            <div id="cake">
                <div class="candle"><div class="flame"></div></div>
                <div class="icing"></div>
                <div class="top layer"><div class="message">HAPPY 20/10</div></div>
                <div class="middle layer"></div>
                <div class="bottom layer"></div>
            </div>

            <p id="closing-message" style="font-size: 1.2em; font-weight: bold; margin-top: 30px; display: none; color: #880e4f;">
                Anh y√™u em r·∫•t nhi·ªÅu! Ch√∫c em ng√†y 20/10 th·∫≠t h·∫°nh ph√∫c! ‚ù§Ô∏è
            </p>
        </div>
    </div>

    <script>
        // *** DANH S√ÅCH ·∫¢NH C·ª¶A B·∫†N (C·∫¨P NH·∫¨T T√äN ·∫¢NH V√ÄO ƒê√ÇY) ***
        // ƒê·∫£m b·∫£o c√°c file n√†y n·∫±m trong th∆∞ m·ª•c img/
        const photoList = [
            "1.jpeg", 
            "2.jpeg", 
            "3.jpeg", 
            "4.jpeg",
            // Th√™m c√°c t√™n file ·∫£nh kh√°c c·ªßa b·∫°n v√†o ƒë√¢y
        ];

        // N·ªôi dung th∆∞
        const letterContent = `
G·ª≠i em, c√¥ g√°i anh y√™u nh·∫•t!

Ng√†y 20/10 l·∫°i ƒë·∫øn r·ªìi, m·ªôt ng√†y th·∫≠t ƒë·∫∑c bi·ªát ƒë·ªÉ t√¥n vinh nh·ªØng ng∆∞·ªùi ph·ª• n·ªØ tuy·ªát v·ªùi nh∆∞ em. Anh mu·ªën g·ª≠i ƒë·∫øn em t·∫•t c·∫£ nh·ªØng l·ªùi ch√∫c t·ªët ƒë·∫πp nh·∫•t.

C·∫£m ∆°n em ƒë√£ b∆∞·ªõc v√†o cu·ªôc ƒë·ªùi anh, mang theo √°nh n·∫Øng, ti·∫øng c∆∞·ªùi v√† s·ª± ·∫•m √°p. M·ªói kho·∫£nh kh·∫Øc b√™n em ƒë·ªÅu l√† nh·ªØng k·ª∑ ni·ªám v√¥ gi√° m√† anh s·∫Ω lu√¥n tr√¢n tr·ªçng.

Ch√∫c em lu√¥n xinh ƒë·∫πp, r·∫°ng r·ª°, t·ª± tin v√† ƒë·∫°t ƒë∆∞·ª£c m·ªçi ƒëi·ªÅu em mong mu·ªën trong cu·ªôc s·ªëng. 
D√π c√≥ b·∫•t c·ª© chuy·ªán g√¨ x·∫£y ra, h√£y nh·ªõ r·∫±ng lu√¥n c√≥ m·ªôt ng∆∞·ªùi ·ªü ƒë√¢y, y√™u th∆∞∆°ng, ·ªßng h·ªô v√† tin t∆∞·ªüng em v√¥ ƒëi·ªÅu ki·ªán.

Y√™u em nhi·ªÅu l·∫Øm!

Minh V≈© ‚ô•Ô∏èLoannnn R·∫•t Nhi·ªÅuuuuu
(P/s: Anh mong em th√≠ch m√≥n qu√† nh·ªè n√†y!)
`;

        const music = document.getElementById('bg-music');
        const container = document.getElementById('container');
        const content = document.getElementById('content');
        const introText = document.getElementById('intro-text');
        const typingLetter = document.getElementById('typing-letter');
        const finalStep = document.getElementById('final-step');
        const photoFrame = document.getElementById('photo-frame');
        const slideshowMessage = document.getElementById('slideshow-message');
        const cakeElement = document.getElementById('cake');
        const closingMessage = document.getElementById('closing-message');
        const musicQuestion = document.getElementById('music-question');
        const balloonArea = document.getElementById('balloon-area');

        let slideshowInterval;
        let resolveSlideshow; // Bi·∫øn l∆∞u h√†m resolve c·ªßa Promise

        // H√†m g√µ ch·ªØ t·ª± ƒë·ªông
        function typeWriter(text, element, speed) {
            let i = 0;
            return new Promise(resolve => {
                function typing() {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                        setTimeout(typing, speed);
                    } else {
                        resolve();
                    }
                }
                typing();
            });
        }

        // --- H√ÄM TR√åNH CHI·∫æU ·∫¢NH (SLIDESHOW) ---
        function startSlideshow(durationPerPhoto = 2500) { // 2.5 gi√¢y/·∫£nh
            
            slideshowMessage.style.display = 'none';

            // T·∫°o c√°c th·∫ª <img>
            photoList.forEach(photoName => {
                const img = document.createElement('img');
                img.src = `img/${photoName}`; 
                img.alt = "·∫¢nh k·ª∑ ni·ªám";
                img.className = 'slide-image';
                
                img.onerror = () => {
                    console.error(`Kh√¥ng t·∫£i ƒë∆∞·ª£c ·∫£nh: img/${photoName}`);
                    img.style.opacity = 0; 
                };

                photoFrame.appendChild(img);
            });

            const slides = document.querySelectorAll('.slide-image');
            if (slides.length === 0 || photoList.length === 0) {
                photoFrame.innerHTML = "<p style='line-height: 300px; color: red;'>L·ªói: Kh√¥ng t√¨m th·∫•y ·∫£nh n√†o! Vui l√≤ng ki·ªÉm tra m·∫£ng photoList.</p>";
                return new Promise(resolve => setTimeout(resolve, 3000));
            }

            let slideIndex = 0;

            function showSlides() {
                // N·∫øu ƒë√£ chi·∫øu h·∫øt ·∫£nh
                if (slideIndex >= slides.length) {
                    clearInterval(slideshowInterval); 
                    resolveSlideshow(); // K√≠ch ho·∫°t Promise ƒë·ªÉ chuy·ªÉn sang b∆∞·ªõc ti·∫øp theo
                    return;
                }

                // T·∫Øt t·∫•t c·∫£ c√°c slide v√† b·∫≠t slide hi·ªán t·∫°i
                slides.forEach(slide => slide.classList.remove('active'));
                slides[slideIndex].classList.add('active');

                // Chuy·ªÉn sang slide ti·∫øp theo
                slideIndex++;
            }

            // B·∫Øt ƒë·∫ßu tr√¨nh chi·∫øu
            return new Promise(resolve => {
                resolveSlideshow = resolve; 
                showSlides(); // Hi·ªÉn th·ªã ·∫£nh ƒë·∫ßu ti√™n ngay l·∫≠p t·ª©c
                slideshowInterval = setInterval(showSlides, durationPerPhoto);
            });
        }

        // Hi·ªáu ·ª©ng b√≥ng bay
        function startBalloonAnimation() {
            const colors = ['#f44336', '#9c27b0', '#2196f3', '#4caf50', '#ff9800'];
            
            for (let i = 0; i < 10; i++) {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                
                const randomLeft = Math.random() * 80 + 10;
                balloon.style.left = randomLeft + '%';
                
                const color = colors[Math.floor(Math.random() * colors.length)];
                balloon.style.background = color;
                balloon.style.setProperty('--balloon-color', color);
                
                const randomDelay = Math.random() * 5; 
                balloon.style.animationDelay = randomDelay + 's';
                
                balloonArea.appendChild(balloon);
            }
        }


        // B·∫ÆT ƒê·∫¶U CH∆Ø∆†NG TR√åNH CH√çNH
        function startGift(playMusic) {
            // ·∫®n c√¢u h·ªèi v√† hi·ªán n·ªôi dung ch√≠nh
            musicQuestion.style.display = 'none';
            container.style.opacity = '1';
            content.style.display = 'block';

            // 1. PH√ÅT NH·∫†C & GI·ªöI THI·ªÜU
            let intro = "";
            if (playMusic) {
                try {
                    music.play(); 
                } catch (e) {
                    console.error("Kh√¥ng th·ªÉ ph√°t nh·∫°c 'chill.mp3'. H√£y ki·ªÉm tra t√™n file v√† ƒë∆∞·ªùng d·∫´n.");
                }
                intro = "üîä Tuy·ªát v·ªùi! H√£y c√πng th∆∞·ªüng th·ª©c kh√¥ng gian l√£ng m·∫°n v·ªõi b·∫£n Nh·∫°c Nh√©...";
            } else {
                intro = "ü§´ Kh√¥ng sao, s·ª± ch√¢n th√†nh n√†y v·∫´n ƒë·ªß ƒë·ªÉ l√†m em h·∫°nh ph√∫c. Ch√†o m·ª´ng em ƒë·∫øn v·ªõi b·∫•t ng·ªù nho nh·ªè n√†y!";
            }

            typeWriter(intro, introText, 50)
            .then(() => {
                typingLetter.textContent = ''; 
                return new Promise(resolve => setTimeout(resolve, 1000));
            })
            // 2. G√ï TH∆Ø T√åNH T·ª∞ ƒê·ªòNG
            .then(() => typeWriter(letterContent, typingLetter, 25))
            .then(() => {
                return new Promise(resolve => setTimeout(resolve, 2000)); 
            })
            // 3. HI·ªÜN TR√åNH CHI·∫æU ·∫¢NH
            .then(() => {
                finalStep.textContent = "3: Xem l·∫°i nh·ªØng kho·∫£nh kh·∫Øc ƒë·∫πp nh·∫•t c·ªßa ch√∫ng ta!";
                finalStep.style.display = 'block';
                photoFrame.style.display = 'block';
                
                return startSlideshow(); // B·∫Øt ƒë·∫ßu tr√¨nh chi·∫øu v√† ƒë·ª£i cho ƒë·∫øn khi xong
            })
            // 4. HI·ªÜU ·ª®NG CU·ªêI: B√ìNG BAY & B√ÅNH KEM
            .then(() => {
                finalStep.textContent = "4 B√ìNG BAY V√Ä B√ÅNH KEM CH√öC M·ª™NG!";
                
                // Th·∫£ b√≥ng bay
                startBalloonAnimation();

                // Hi·ªán b√°nh kem
                cakeElement.style.display = 'block';
                
                // L·ªùi nh·∫Øn cu·ªëi
                closingMessage.style.display = 'block';
            });
        }

        // --- S·ª∞ KI·ªÜN T∆Ø∆†NG T√ÅC (ƒê√É KH√îI PH·ª§C V√Ä ƒê·∫¢M B·∫¢O CH∆Ø∆†NG TR√åNH CH·∫†Y SAU KHI CLICK) ---
        document.getElementById('btn-yes').addEventListener('click', () => {
            startGift(true);
        });

        document.getElementById('btn-no').addEventListener('click', () => {
            startGift(false);
        });

    </script>
</body>
</html>
